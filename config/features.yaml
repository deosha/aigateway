# =============================================================================
# AI Gateway Platform - Feature Flags Configuration
# =============================================================================
# This file controls which features are enabled in the platform.
# Used by: Docker Compose, Kubernetes, Admin API
#
# Environment override: Set FEATURE_<NAME>=true/false to override
# =============================================================================

# Environment identifier
environment: ${ENVIRONMENT:-development}  # development | staging | production

# -----------------------------------------------------------------------------
# Core Features (always enabled)
# -----------------------------------------------------------------------------
core:
  litellm: true           # LLM proxy - required
  postgres: true          # Database - required
  redis: true             # Cache - required
  admin_api: true         # Admin REST API
  admin_ui: true          # Admin web interface

# -----------------------------------------------------------------------------
# Observability Features
# -----------------------------------------------------------------------------
observability:
  enabled: ${FEATURE_OBSERVABILITY:-false}
  prometheus: true        # Metrics collection
  grafana: true           # Dashboards
  jaeger: true            # Distributed tracing
  otel_collector: true    # OpenTelemetry collector

# -----------------------------------------------------------------------------
# Agent Gateway Features
# -----------------------------------------------------------------------------
agent_gateway:
  enabled: ${FEATURE_AGENT_GATEWAY:-false}
  mcp_protocol: true      # Model Context Protocol
  a2a_protocol: true      # Agent-to-Agent protocol

# -----------------------------------------------------------------------------
# Workflow Features
# -----------------------------------------------------------------------------
workflows:
  enabled: ${FEATURE_WORKFLOWS:-false}
  temporal: true          # Durable workflow engine
  temporal_ui: true       # Workflow monitoring UI
  workflow_engine: true   # LangGraph workflows
  a2a_runtime: true       # Agent orchestration

# -----------------------------------------------------------------------------
# Local Model Features
# -----------------------------------------------------------------------------
local_models:
  enabled: ${FEATURE_LOCAL_MODELS:-false}
  ollama_integration: true   # Connect to host Ollama
  gpu_stub: true             # Helpful errors when Ollama not available
  # Ollama host detection:
  # - macOS/Windows: host.docker.internal
  # - Linux: 172.17.0.1 or use host network
  ollama_host: ${OLLAMA_HOST:-host.docker.internal}
  ollama_port: ${OLLAMA_PORT:-11434}

# -----------------------------------------------------------------------------
# FinOps Features
# -----------------------------------------------------------------------------
finops:
  enabled: ${FEATURE_FINOPS:-false}
  cost_predictor: true    # Real-time cost prediction
  budget_webhook: true    # Budget enforcement
  finops_reporter: true   # Cost reporting

# -----------------------------------------------------------------------------
# Experimental Features
# -----------------------------------------------------------------------------
experimental:
  enabled: ${FEATURE_EXPERIMENTAL:-false}
  policy_router: true     # Cedar policy-based routing
  semantic_cache: true    # Embedding-based caching

# -----------------------------------------------------------------------------
# Infrastructure Features
# -----------------------------------------------------------------------------
infrastructure:
  enabled: ${FEATURE_INFRA:-false}
  nginx: true             # Reverse proxy
  vault: true             # Secret management
  landing_page: true      # Demo landing page

# -----------------------------------------------------------------------------
# Security Features
# -----------------------------------------------------------------------------
security:
  ssl_enabled: ${ENABLE_SSL:-false}
  ssl_cert_path: ${SSL_CERT_PATH:-./certs/localhost.pem}
  ssl_key_path: ${SSL_KEY_PATH:-./certs/localhost-key.pem}
  require_api_key: true
  jwt_expiry_hours: 8

# -----------------------------------------------------------------------------
# Model Provider Features
# -----------------------------------------------------------------------------
providers:
  openai:
    enabled: ${OPENAI_API_KEY:+true}
  anthropic:
    enabled: ${ANTHROPIC_API_KEY:+true}
  google:
    enabled: ${GOOGLE_API_KEY:+true}
  xai:
    enabled: ${XAI_API_KEY:+true}
  deepseek:
    enabled: ${DEEPSEEK_API_KEY:+true}
  bedrock:
    enabled: ${AWS_ACCESS_KEY_ID:+true}
  vertex:
    enabled: ${VERTEX_PROJECT:+true}
  azure:
    enabled: ${AZURE_API_KEY:+true}
  ollama:
    enabled: ${FEATURE_LOCAL_MODELS:-false}

---
# Code Assistant Agent
apiVersion: v1
kind: ConfigMap
metadata:
  name: code-assistant-config
  namespace: a2a
  labels:
    app.kubernetes.io/name: code-assistant
    app.kubernetes.io/type: agent
data:
  agent-manifest.json: |
    {
      "name": "code-assistant",
      "version": "1.0.0",
      "description": "Agent specialized in code analysis, review, and refactoring",
      "capabilities": [
        {
          "name": "code-review",
          "description": "Review code for quality, bugs, and improvements",
          "parameters": {
            "type": "object",
            "properties": {
              "code": {"type": "string"},
              "language": {"type": "string"}
            }
          }
        },
        {
          "name": "refactor-code",
          "description": "Suggest refactoring improvements",
          "parameters": {
            "type": "object",
            "properties": {
              "code": {"type": "string"},
              "language": {"type": "string"},
              "focus": {"type": "string", "enum": ["performance", "readability", "security"]}
            }
          }
        },
        {
          "name": "explain-code",
          "description": "Explain what code does",
          "parameters": {
            "type": "object",
            "properties": {
              "code": {"type": "string"},
              "language": {"type": "string"}
            }
          }
        }
      ],
      "requirements": {
        "mcpServers": ["code-analysis"],
        "models": ["gpt-4o", "claude-3-5-sonnet"]
      },
      "metadata": {
        "author": "Platform Team",
        "tags": ["code", "development", "analysis"]
      }
    }
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: code-assistant
  namespace: a2a
  labels:
    app.kubernetes.io/name: code-assistant
    app.kubernetes.io/type: agent
    app.kubernetes.io/component: agent
spec:
  replicas: 2
  selector:
    matchLabels:
      app.kubernetes.io/name: code-assistant
  template:
    metadata:
      labels:
        app.kubernetes.io/name: code-assistant
        app.kubernetes.io/type: agent
      annotations:
        prometheus.io/scrape: "true"
        prometheus.io/port: "8080"
    spec:
      serviceAccountName: agent
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 1000
        seccompProfile:
          type: RuntimeDefault
      containers:
      - name: code-assistant
        image: ghcr.io/agentgateway/code-assistant-agent:v1.0.0
        ports:
        - name: http
          containerPort: 8080
        - name: metrics
          containerPort: 9090
        env:
        - name: AGENT_NAME
          value: "code-assistant"
        - name: AGENT_MANIFEST_PATH
          value: "/config/agent-manifest.json"
        - name: AGENT_REGISTRY_URL
          value: "http://agent-registry.a2a.svc.cluster.local:8080"
        - name: MCP_GATEWAY_URL
          value: "http://agentgateway.agentgateway.svc.cluster.local:9001"
        - name: LLM_GATEWAY_URL
          value: "http://agentgateway.agentgateway.svc.cluster.local:9000"
        - name: OTEL_EXPORTER_OTLP_ENDPOINT
          value: "http://otel-collector.observability.svc.cluster.local:4318"
        volumeMounts:
        - name: config
          mountPath: /config
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          limits:
            cpu: 500m
            memory: 512Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          capabilities:
            drop:
            - ALL
      volumes:
      - name: config
        configMap:
          name: code-assistant-config
---
apiVersion: v1
kind: Service
metadata:
  name: code-assistant
  namespace: a2a
  labels:
    app.kubernetes.io/name: code-assistant
    app.kubernetes.io/type: agent
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: http
    name: http
  selector:
    app.kubernetes.io/name: code-assistant
---
# Data Analysis Agent
apiVersion: v1
kind: ConfigMap
metadata:
  name: data-analysis-config
  namespace: a2a
  labels:
    app.kubernetes.io/name: data-analysis
    app.kubernetes.io/type: agent
data:
  agent-manifest.json: |
    {
      "name": "data-analysis",
      "version": "1.0.0",
      "description": "Agent specialized in data analysis, SQL queries, and insights",
      "capabilities": [
        {
          "name": "analyze-data",
          "description": "Analyze dataset and provide insights",
          "parameters": {
            "type": "object",
            "properties": {
              "query": {"type": "string"},
              "dataset": {"type": "string"}
            }
          }
        },
        {
          "name": "generate-sql",
          "description": "Generate SQL queries from natural language",
          "parameters": {
            "type": "object",
            "properties": {
              "request": {"type": "string"},
              "schema": {"type": "object"}
            }
          }
        },
        {
          "name": "visualize-data",
          "description": "Suggest visualizations for data",
          "parameters": {
            "type": "object",
            "properties": {
              "data": {"type": "array"},
              "type": {"type": "string", "enum": ["chart", "graph", "table"]}
            }
          }
        }
      ],
      "requirements": {
        "mcpServers": ["database"],
        "models": ["gpt-4o", "claude-3-5-sonnet"]
      },
      "metadata": {
        "author": "Platform Team",
        "tags": ["data", "analytics", "sql"]
      }
    }
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: data-analysis
  namespace: a2a
  labels:
    app.kubernetes.io/name: data-analysis
    app.kubernetes.io/type: agent
    app.kubernetes.io/component: agent
spec:
  replicas: 2
  selector:
    matchLabels:
      app.kubernetes.io/name: data-analysis
  template:
    metadata:
      labels:
        app.kubernetes.io/name: data-analysis
        app.kubernetes.io/type: agent
      annotations:
        prometheus.io/scrape: "true"
        prometheus.io/port: "8080"
    spec:
      serviceAccountName: agent
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 1000
        seccompProfile:
          type: RuntimeDefault
      containers:
      - name: data-analysis
        image: ghcr.io/agentgateway/data-analysis-agent:v1.0.0
        ports:
        - name: http
          containerPort: 8080
        - name: metrics
          containerPort: 9090
        env:
        - name: AGENT_NAME
          value: "data-analysis"
        - name: AGENT_MANIFEST_PATH
          value: "/config/agent-manifest.json"
        - name: AGENT_REGISTRY_URL
          value: "http://agent-registry.a2a.svc.cluster.local:8080"
        - name: MCP_GATEWAY_URL
          value: "http://agentgateway.agentgateway.svc.cluster.local:9001"
        - name: LLM_GATEWAY_URL
          value: "http://agentgateway.agentgateway.svc.cluster.local:9000"
        - name: OTEL_EXPORTER_OTLP_ENDPOINT
          value: "http://otel-collector.observability.svc.cluster.local:4318"
        volumeMounts:
        - name: config
          mountPath: /config
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          limits:
            cpu: 500m
            memory: 512Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          capabilities:
            drop:
            - ALL
      volumes:
      - name: config
        configMap:
          name: data-analysis-config
---
apiVersion: v1
kind: Service
metadata:
  name: data-analysis
  namespace: a2a
  labels:
    app.kubernetes.io/name: data-analysis
    app.kubernetes.io/type: agent
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: http
    name: http
  selector:
    app.kubernetes.io/name: data-analysis
---
# Research Agent
apiVersion: v1
kind: ConfigMap
metadata:
  name: research-agent-config
  namespace: a2a
  labels:
    app.kubernetes.io/name: research-agent
    app.kubernetes.io/type: agent
data:
  agent-manifest.json: |
    {
      "name": "research-agent",
      "version": "1.0.0",
      "description": "Agent specialized in research, information gathering, and synthesis",
      "capabilities": [
        {
          "name": "research-topic",
          "description": "Research a topic and provide comprehensive summary",
          "parameters": {
            "type": "object",
            "properties": {
              "topic": {"type": "string"},
              "depth": {"type": "string", "enum": ["quick", "detailed", "comprehensive"]}
            }
          }
        },
        {
          "name": "find-papers",
          "description": "Find academic papers on a topic",
          "parameters": {
            "type": "object",
            "properties": {
              "query": {"type": "string"},
              "field": {"type": "string"},
              "year_range": {"type": "object"}
            }
          }
        },
        {
          "name": "summarize-content",
          "description": "Summarize long-form content",
          "parameters": {
            "type": "object",
            "properties": {
              "content": {"type": "string"},
              "style": {"type": "string", "enum": ["brief", "detailed", "technical"]}
            }
          }
        }
      ],
      "requirements": {
        "mcpServers": ["filesystem"],
        "models": ["gpt-4o", "claude-3-5-sonnet"]
      },
      "metadata": {
        "author": "Platform Team",
        "tags": ["research", "information", "synthesis"]
      }
    }
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: research-agent
  namespace: a2a
  labels:
    app.kubernetes.io/name: research-agent
    app.kubernetes.io/type: agent
    app.kubernetes.io/component: agent
spec:
  replicas: 2
  selector:
    matchLabels:
      app.kubernetes.io/name: research-agent
  template:
    metadata:
      labels:
        app.kubernetes.io/name: research-agent
        app.kubernetes.io/type: agent
      annotations:
        prometheus.io/scrape: "true"
        prometheus.io/port: "8080"
    spec:
      serviceAccountName: agent
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 1000
        seccompProfile:
          type: RuntimeDefault
      containers:
      - name: research-agent
        image: ghcr.io/agentgateway/research-agent:v1.0.0
        ports:
        - name: http
          containerPort: 8080
        - name: metrics
          containerPort: 9090
        env:
        - name: AGENT_NAME
          value: "research-agent"
        - name: AGENT_MANIFEST_PATH
          value: "/config/agent-manifest.json"
        - name: AGENT_REGISTRY_URL
          value: "http://agent-registry.a2a.svc.cluster.local:8080"
        - name: MCP_GATEWAY_URL
          value: "http://agentgateway.agentgateway.svc.cluster.local:9001"
        - name: LLM_GATEWAY_URL
          value: "http://agentgateway.agentgateway.svc.cluster.local:9000"
        - name: OTEL_EXPORTER_OTLP_ENDPOINT
          value: "http://otel-collector.observability.svc.cluster.local:4318"
        volumeMounts:
        - name: config
          mountPath: /config
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          limits:
            cpu: 500m
            memory: 512Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          capabilities:
            drop:
            - ALL
      volumes:
      - name: config
        configMap:
          name: research-agent-config
---
apiVersion: v1
kind: Service
metadata:
  name: research-agent
  namespace: a2a
  labels:
    app.kubernetes.io/name: research-agent
    app.kubernetes.io/type: agent
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: http
    name: http
  selector:
    app.kubernetes.io/name: research-agent
